{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Test matrix configuration for WCPOS CI. Update these versions when new releases are available.",
  "lastUpdated": "2026-01-29",
  "php": {
    "previous": "8.1",
    "stable": "8.2",
    "bleeding": "8.3",
    "comment": "PHP versions to test. stable is used for smoke test and coverage."
  },
  "wordpress": {
    "previous": "6.6",
    "stable": "6.7",
    "bleeding": "latest",
    "comment": "WordPress versions. 'latest' always gets the newest stable from WordPress.org."
  },
  "woocommerce": {
    "previous": "9.5.2",
    "stable": "10.4.3",
    "bleeding": "latest",
    "comment": "WooCommerce versions. Note: WC 10.x requires WP 6.8+. Check compatibility when updating."
  },
  "compatibility": {
    "comment": "Version compatibility notes",
    "rules": [
      "WooCommerce 10.x requires WordPress 6.8+",
      "WooCommerce 9.x requires WordPress 6.6+",
      "PHP 7.4 is minimum for WooCommerce, but we test 8.1+ for better performance"
    ]
  },
  "knownDifferences": {
    "comment": "WooCommerce version differences that affect test assertions. Tests use version_compare() to handle these.",
    "items": [
      {
        "feature": "Tax total formatting in REST API line_items.taxes and tax_lines",
        "before": "WC < 10.0 returns unpadded values (e.g. '1', '0.22')",
        "after": "WC >= 10.0 returns 6-decimal padded values (e.g. '1.000000', '0.220000')",
        "affectedTests": ["Test_Order_Taxes"],
        "note": "Top-level order fields (total, total_tax, cart_tax, fee_lines.total) are formatted via wc_format_decimal with dp and are consistent across versions."
      },
      {
        "feature": "Product brands field in REST API",
        "addedIn": "WC 9.9.0",
        "reference": "https://github.com/woocommerce/woocommerce/pull/55945",
        "affectedTests": ["Test_Products_Controller"],
        "note": "The 'brands' field was added to the product REST API schema when WooCommerce Brands was integrated into core. Tests conditionally include this field based on WC_VERSION."
      }
    ]
  }
}
